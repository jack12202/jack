<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="GPT Plus 官方 iOS 通道代充，¥159/月，微信直充，5 分钟自动到帐" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GPT Plus 充值平台</title>

  <!-- 简单的 CSS，只依赖系统字体 -->
  <style>
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --accent: #f97316;
      --gray-300: #d4d4d8;
      --gray-500: #6b7280;
      --radius: 22px;
    }

    /* 背景渐变 & 全局排版 */
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      background: linear-gradient(135deg, #6366f1 0%, #6b46c1 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
    }

    /* 中心卡片 */
    .card {
      width: 100%;
      max-width: 620px;
      background: rgba(255, 255, 255, 0.12);
      border-radius: var(--radius);
      box-shadow: 0 6px 36px rgba(0, 0, 0, 0.15);
      backdrop-filter: blur(24px);
      overflow: hidden;
    }

    /* 卡片 – 顶部彩条、标题、徽章 */
    .card-header {
      padding: 48px 40px 32px;
      text-align: center;
    }
    .card-header h1 {  margin-bottom:6px;
      font-size: 1.8rem;
      margin: 0 0 8px;
      font-weight: 700;
    }
    .badges {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
    }
      .badge {
    padding: 4px 12px;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 9999px;
    background: #ffffff1a;
    backdrop-filter: blur(12px);
    border: 1px solid #ffffff30;
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }
  .badge.clickable {
    background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
    border: 1px solid #818cf8;
    box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
    transition: all 0.2s ease;
  }
  .badge.clickable:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
    background: linear-gradient(135deg, #5b52e8 0%, #7c3aed 100%);
  }

    /* 指标区域 */
    .stats {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 24px;
      margin: 36px 0 12px;
    }
    .stat {
      flex: 1 1 140px;
      text-align: center;
    }
    .stat-value {
      font-size:1rem;
      font-weight: 800;
      line-height: 1;
      margin-bottom: 4px;
    }
    .stat-label {
      font-size: 0.75rem;
      color: var(--gray-300);
    }

    /* 白底表单区 */
    .form-area {
      background: #ffffff;
      color: #000;
      padding: 40px 40px 48px;
    }

    /* 步骤条 */
    .steps {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-bottom: 32px;
    }
    .steps li {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--gray-300);
      color: var(--gray-500);
      font-weight: 700;
      display: grid;
      place-items: center;
      font-size: 0.9rem;
    }
    .steps li.active {
      background: var(--primary);
      color: #fff;
    }

    /* 表单控件 */
    .field-label {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 6px;
      display: block;
    }
    .input {
      width: 100%;
      padding: 14px 16px;
      font-size: 0.95rem;
      border: 2px solid var(--gray-300);
      border-radius: 10px;
      transition: border 0.25s;
    }
    .input:focus {
      outline: none;
      border-color: var(--primary);
    }
    .hint {
      margin-top: 6px;
      font-size: 0.75rem;
      color: var(--gray-500);
    }

    /* CTA 按钮 */
    .btn {
      display: block;
      width: 100%;
      margin-top: 26px;
      padding: 16px 0;
      font-size: 1.05rem;
      font-weight: 700;
      color: #fff;
      background: var(--primary);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.25s;
    }
    .btn:hover {
      background: var(--primary-dark);
    }

    /* 页脚 */
    footer {
      text-align: center;
      font-size: 0.7rem;
      color: var(--gray-300);
      padding: 18px 0 24px;
    }

    /* 小屏优化 */
    @media (max-width: 480px) {
      .card-header { padding: 40px 24px 24px; }
      .form-area   { padding: 32px 24px; }
    }
  
  /* ======== 价格 + CTA ======== */
  .price{ margin-top:4px; display:flex; justify-content:center; align-items:flex-end; gap:8px; 
    display:flex;
    justify-content:center;
    align-items:flex-end;
    gap:8px;
    margin-top:6px;
  }
  .price-val{
    font-size:2.4rem;
    font-weight:900;
    line-height:1;
  }
  .price-tag{
    font-size:.8rem;
    font-weight:600;
    padding:4px 10px;
    border-radius:9999px;
    background:var(--accent);
    color:#fff;
  }

  .btn-buy{
    width:100%;
    margin:22px 0 6px;
    padding:18px 0;
    font-size:1.12rem;
    font-weight:800;
    letter-spacing:.02em;
    color:#fff;
    background: linear-gradient(180deg, #ffb457 0%, #f97316 100%);
    border:none;
    border-radius:14px;
    cursor:pointer;
    transition: transform .15s ease, filter .2s ease;
    box-shadow:0 10px 24px rgba(249,115,22,.35);
    animation: ctaPulse 2.2s ease-in-out infinite;
  }
  .btn-buy:hover{ filter: brightness(1.05); transform: translateY(-2px); }
  .btn-buy:active{ transform: translateY(0); }
  .btn-buy:focus-visible{ outline: 3px solid #fde68a; outline-offset: 2px; }

  /* —— 说明文字 —— */
  .note-weak{
    margin:10px 0 4px;
    text-align:center;
    font-size:.82rem;
    color:#e5e7eb;
    opacity:.9;
  }
  .note-link{
    color:#bfdbfe;
    text-decoration:underline;
  }
  

  /* —— 客服浮窗 —— */
  .cs-fab{
    position:fixed; right:22px; bottom:22px;
    display: flex;
    flex-direction: column;
    align-items: center;
    width:auto; padding: 8px 12px; border-radius:24px;
    background:#ffffff; color:#111; border:none;
    box-shadow:0 6px 26px rgba(0,0,0,.2);
    font-size:22px; cursor:pointer;
  }
  .cs-fab-text {
    font-size: 12px;
    font-weight: 600;
    margin-top: 4px;
    color: #10b981;
  }
  .cs-drawer{
    position:fixed; right:22px; bottom:92px;
    width:260px; background:#fff; color:#111;
    border-radius:14px; box-shadow:0 12px 36px rgba(0,0,0,.22);
    transform:translateY(20px); opacity:0; pointer-events:none;
    transition:all .2s ease;
  }
  .cs-drawer.open{ transform:translateY(0); opacity:1; pointer-events:auto; }
  .cs-head{
    display:flex; justify-content:space-between; align-items:center;
    padding:12px 14px; border-bottom:1px solid #eee;
  }
  .cs-head button{ background:transparent; border:none; font-size:16px; cursor:pointer; }
  .cs-body{ padding:12px 14px 16px; font-size:.92rem; }
  .cs-body p{ margin:10px 0; }
  .copy{
    margin-left:8px; padding:4px 8px; font-size:.78rem;
    border-radius:8px; border:1px solid #e5e7eb; background:#f9fafb; cursor:pointer;
  }
  .qq-toggle-btn{
    width:100%; margin-top:8px; padding:6px 8px; font-size:.8rem;
    border:1px solid #d1d5db; background:#f8fafc; border-radius:6px;
    cursor:pointer; color:#374151; transition:background .2s;
  }
  .qq-toggle-btn:hover{ background:#e5e7eb; }
  .qq-content{ margin-top:8px; }
  .qr{ display:block; width:100%; border-radius:10px; margin-top:8px; }
  
  .video-drawer{
    position:fixed; left:50%; bottom:50%; transform:translate(-50%, 50%) scale(0.9);
    width:min(90vw, 600px); background:#fff; color:#111;
    border-radius:14px; box-shadow:0 12px 36px rgba(0,0,0,.22);
    opacity:0; pointer-events:none;
    transition:all .3s ease;
    z-index:100;
  }
  .video-drawer.open{ 
    transform:translate(-50%, 50%) scale(1); 
    opacity:1; 
    pointer-events:auto; 
  }
  .video-head{
    display:flex; justify-content:space-between; align-items:center;
    padding:14px 18px; border-bottom:1px solid #eee;
  }
  .video-head button{ background:transparent; border:none; font-size:18px; cursor:pointer; }
  .video-body{ padding:16px 18px 20px; }
  .video-body video{ width:100%; border-radius:8px; }
  .video-description{
    margin:16px 0 0; padding:12px 14px;
    background:#f9fafb; border-radius:8px;
    font-size:0.9rem; color:#374151;
    line-height:1.5;
  }
  .video-mask{
    position:fixed; inset:0; background:rgba(0,0,0,.6);
    backdrop-filter:blur(3px); z-index:90;
    display:none;
  }
  .video-mask.show{ display:block; }

  /* ======== 首屏精简：隐藏激活码验证区 ======== */
  .form-area, .steps { display:none !important; }
  /* ===== CTA 强化 ===== */
  @keyframes ctaPulse {
    0%,100% { box-shadow: 0 10px 24px rgba(249,115,22,.28); transform: translateY(0); }
    50%     { box-shadow: 0 16px 36px rgba(249,115,22,.42); transform: translateY(-1px); }
  }

  /* ===== 移动端浮窗 CTA ===== */
  .cta-sticky{
    position:fixed; left:16px; right:16px; bottom:16px; z-index:50;
    display:none;
    text-align:center; font-weight:800; font-size:1.02rem; color:#fff;
    padding:14px 0; border-radius:14px; text-decoration:none;
    background: linear-gradient(180deg, #ffb457 0%, #f97316 100%);
    box-shadow:0 10px 24px rgba(249,115,22,.35);
  }
  @media (max-width: 640px){ .cta-sticky{ display:block; } }
  .steps-mini{
    display:flex; flex-wrap:wrap; gap:8px 10px; justify-content:center;
    align-items:center; margin:8px 0 4px;
  }
  .step-pill{
    font-size:.78rem; font-weight:600; color:#1f2937;
    padding:6px 10px; border-radius:9999px;
    background:rgba(255,255,255,.85); border:1px solid rgba(0,0,0,.06);
    box-shadow:0 2px 6px rgba(0,0,0,.06);
  }
  .steps-link{
    margin-left:6px; font-size:.78rem; color:#bfdbfe; text-decoration:underline;
  }

  .flow-mask{
    position:fixed; inset:0; background:rgba(0,0,0,.35);
    backdrop-filter: blur(2px);
    display:none; align-items:center; justify-content:center; z-index:60;
  }
  .flow-mask.show{ display:flex; }
  .flow-modal{
    width:min(92vw,560px); background:#fff; color:#111; border-radius:16px;
    box-shadow:0 24px 64px rgba(0,0,0,.25); overflow:hidden;
  }
  .flow-head{
    display:flex; justify-content:space-between; align-items:center;
    padding:12px 16px; border-bottom:1px solid #eee;
  }
  .flow-head button{ background:transparent; border:none; font-size:18px; cursor:pointer; }
  .flow-body{ padding:14px 18px 18px; }
  .flow-body ol{ margin:0 0 6px 18px; }
  .flow-body li{ margin:8px 0; line-height:1.6; }
  .tips{ margin-top:6px; font-size:.9rem; color:#6b7280; }
  .tips.highlight{ 
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    padding: 12px 16px;
    border-radius: 10px;
    border: 1px solid #f59e0b;
    font-weight: 600;
    text-align: center;
    margin: 16px 0;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.15);
  }
  /* —— 优化对齐：垂直左对齐列表 —— */
  .buy-notes {
    list-style: none;
    padding: 0;
    margin: 12px auto;
    max-width: 360px;
    display: block;
    text-align: left;
  }
  .buy-notes li {
    display: flex;
    align-items: center;
    margin: 6px 0;
    font-size: 0.9rem;
    color: #e5e7eb;
    opacity: 0.9;
  }
  .buy-notes li::before {
    content: '✔';
    margin-right: 8px;
    color: #34d399;
    font-size: 1rem;
  }
  .buy-notes li.highlight {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    padding: 12px 16px;
    border-radius: 10px;
    border: 1px solid #f59e0b;
    font-weight: 600;
    margin: 16px 0;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.15);
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .buy-notes li.highlight:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.25);
  }
  .buy-notes li.highlight::before {
    content: '💬';
    color: #f59e0b;
  }
  /* —— flow-modal 客服入口样式 —— */
  .flow-support { margin-top:16px; padding-top:12px; border-top:1px solid #e5e7eb; }
  .flow-support .support-title {
    font-size:0.92rem; font-weight:600; color:#111827; margin-bottom:6px;
  }
  .flow-support p {
    margin:4px 0; font-size:0.88rem; color:#374151;
  }
  .flow-support .copy-btn {
    margin-left:8px; padding:2px 6px; font-size:0.78rem;
    border:1px solid #d1d5db; background:#f9fafb; border-radius:6px;
    cursor:pointer; transition:background .2s;
  }
  .flow-support .copy-btn:hover { background:#e5e7eb; }
  .flow-qq-toggle-btn{
    width:100%; margin-top:8px; padding:6px 8px; font-size:.8rem;
    border:1px solid #d1d5db; background:#f8fafc; border-radius:6px;
    cursor:pointer; color:#374151; transition:background .2s;
  }
  .flow-qq-toggle-btn:hover{ background:#e5e7eb; }
  .flow-qq-content{ margin-top:8px; }
  .video-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-top: 12px;
    padding: 8px 16px;
    font-size: 0.9rem;
    font-weight: 600;
    color: #4f46e5;
    background: #eef2ff;
    border: 1px solid #e0e7ff;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .video-btn:hover {
    background: #e0e7ff;
    transform: translateY(-1px);
  }
  /* 手机端：把客服浮窗提到置底 CTA 之上 */
  @media (max-width: 640px) {
    /* 悬浮 CTA 高度约 56px + 底部间距16px = 72px，这里提到 80px 更保险 */
    .cs-fab {
      bottom: 80px !important;
    }
  }

</style>
</head>

<body>
  <main class="card">
    <!-- 顶部 -->
    <header class="card-header">
      <h1>GPT Plus 充值平台</h1>
      <!-- 🔥 价格 + CTA -->
      <div class="price">
        <span class="price-val">¥159</span>
        <span class="price-tag">月付·标准版</span>
      </div>

      <button class="btn-buy" id="buyBtn" aria-label="立即购买卡密">🛒 立即购买 (¥159)</button>
      <div class="steps-mini">
        <span class="step-pill">1 下单卡密</span>
        <span class="step-pill">2 提交账号</span>
        <span class="step-pill">3 自动到帐</span>
        <a class="steps-link" href="#" id="openFlow">查看流程</a>
      </div>
      <p class="note-weak">已有卡密？
        <a class="note-link" href="https://chongzhi.pro">点此输入激活码</a>
      </p>

      <ul class="buy-notes">
        <li>官方 iOS 通道 · 微信直充 · 5 分钟自动到帐</li>
        <li>无需提供账号密码，支持新老账号</li>
        <li class="highlight" id="highlightContact">添加人工，领图文详细教程</li>
      </ul>
      
      <div class="badges">
        <span class="badge">📱 官方 iOS 通道</span>
        <span class="badge">🔒 不封号</span>
        <span class="badge">🛡️ 不泄露密码</span>
        <span class="badge clickable" id="videoTutorialBtn">🎥 视频教程</span>
      </div>

      <div class="stats">
        <div class="stat">
          <div class="stat-value">50,000+</div>
          <div class="stat-label">满意用户</div>
        </div>
        <div class="stat">
          <div class="stat-value">99.9%</div>
          <div class="stat-label">成功率</div>
        </div>
        <div class="stat">
          <div class="stat-value">24/7</div>
          <div class="stat-label">在线客服</div>
        </div>
      </div>
    </header>

    <!-- 表单 -->
    <section class="form-area">
      <ol class="steps">
        <li class="active">1</li>
        <li>2</li>
        <li>3</li>
      </ol>

      <label class="field-label" for="code">激活码</label>
      <input
        id="code"
        name="code"
        type="text"
        placeholder="请输入激活码，例如：GPT-DEMO-1234-ABCD"
        class="input"
      />

      <p class="hint">激活码由字母、数字和横线组成，不区分大小写</p>

      <button class="btn" onclick="submitCode()">验证激活码</button>
    </section>

    <footer>
      本平台仅为国内用户提供代充值通道，采用 iOS 官方渠道，安全无忧<br />
      GPT Plus 自动化处理，极简 3 步完成充值
    </footer>
  </main>

  <!-- 客服浮窗 -->
  <button class="cs-fab" id="csFab" aria-label="联系客服">
    <span>💬</span>
    <span class="cs-fab-text">人工咨询</span>
  </button>
  <div class="cs-drawer" id="csDrawer" aria-hidden="true">
    <div class="cs-head">
      <strong>联系客服</strong>
      <button id="csClose" aria-label="关闭">✕</button>
    </div>
    <div class="cs-body">
      <p>微信：<b id="wx">Jiage01888</b>
        <button class="copy" onclick="copyText('wx')">复制</button></p>
      <div class="qq-toggle">
        <button class="qq-toggle-btn" id="qqToggle">微信联系不上时，请联系QQ</button>
        <div class="qq-content" id="qqContent" style="display: none;">
          <p>QQ：<b id="qq">1852634132</b>
            <button class="copy" onclick="copyText('qq')">复制</button></p>
        </div>
      </div>
      <!-- 如有二维码可自行替换图片路径 -->
      <!-- <img src="/assets/wechat-qr.jpg" alt="微信二维码" class="qr"> -->
    </div>
  </div>

  <script>
    function submitCode() {
      const code = document.getElementById("code").value.trim();
      if (!code) {
        alert("请先填写激活码");
        return;
      }
      // 跳转到激活码验证页面
      window.location.href = `chongzhi.pro`;
    }

    document.getElementById('buyBtn')?.addEventListener('click', function () {
      window.open('https://lc.i6ls.com//details/9AC78762', '_blank');
    });

    const fab = document.getElementById('csFab');
    const drawer = document.getElementById('csDrawer');
    const closeBtn = document.getElementById('csClose');
    const qqToggle = document.getElementById('qqToggle');
    const qqContent = document.getElementById('qqContent');

    function toggleDrawer(show){
      if(show){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); }
      else    { drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }
    }
    fab?.addEventListener('click', ()=> toggleDrawer(true));
    closeBtn?.addEventListener('click', ()=> toggleDrawer(false));
    
    // QQ折叠展开功能
    qqToggle?.addEventListener('click', ()=> {
      const isHidden = qqContent.style.display === 'none';
      qqContent.style.display = isHidden ? 'block' : 'none';
      qqToggle.textContent = isHidden ? '收起QQ联系方式' : '微信联系不上时，请联系QQ';
    });
    
    // 突出显示的客服联系功能
    const highlightContact = document.getElementById('highlightContact');
    highlightContact?.addEventListener('click', ()=> {
      toggleDrawer(true);
    });
    
    // 视频教程按钮功能
    const videoTutorialBtn = document.getElementById('videoTutorialBtn');
    videoTutorialBtn?.addEventListener('click', ()=> {
      toggleVideoDrawer(true, false);
    });

    function copyText(id){
      const text = document.getElementById(id)?.textContent || '';
      navigator.clipboard.writeText(text).then(()=> {
        if(window.Toastify){ Toastify({ text: '已复制：' + text, duration: 1500 }).showToast(); }
        else alert('已复制：' + text);
      });
    }
    window.copyText = copyText;
  </script>
  <div class="video-mask" id="videoMask"></div>
  <div class="video-drawer" id="videoDrawer" aria-hidden="true">
    <div class="video-head">
      <strong>GPT Plus 充值视频教程</strong>
      <button id="videoClose" aria-label="关闭">✕</button>
    </div>
    <div class="video-body">
      <video controls>
        <source src="教学视频.mp4" type="video/mp4">
        您的浏览器不支持视频播放。
      </video>
      <div class="video-description">
        <p><b>📝 视频教程说明：</b></p>
        <p>本视频详细演示了 GPT Plus 充值的完整流程，包括下单、提交账号信息及充值完成的全过程。按照视频指引操作，5分钟内即可完成充值。</p>
        <p>如有任何疑问，可随时联系右下角客服获取帮助。</p>
      </div>
    </div>
  </div>

  <!-- 移动端底部浮窗 CTA -->
  <a href="https://lc.i6ls.com//details/9AC78762" target="_blank" class="cta-sticky" role="button" aria-label="¥159 立即购买">¥159 立即购买</a>
  <div class="flow-mask" id="flowMask" aria-hidden="true">
    <div class="flow-modal">
      <div class="flow-head">
        <strong>充值流程</strong>
        <button id="closeFlow" aria-label="关闭">✕</button>
      </div>
      <div class="flow-body">
        <ol>
          <li><b>下单卡密：</b>点击“立即购买卡密”，完成微信支付。</li>
          <li><b>提交账号：</b>按提示填写/确认你的 GPT 账号（无需提供密码）。</li>
          <li><b>自动到帐：</b>系统走 iOS 官方通道，约 5 分钟完成开通。</li>
        </ol>
        <p class="tips highlight">添加人工领图文充值教程</p>
  <div class="flow-support">
    <p class="support-title">客服入口：</p>
    <p>微信：<b id="flow-wx">Jiage01888</b>
       <button class="copy-btn" onclick="copyText('flow-wx')">复制</button>
    </p>
    <div class="flow-qq-toggle">
      <button class="flow-qq-toggle-btn" id="flowQqToggle">微信联系不上时，请联系QQ</button>
      <div class="flow-qq-content" id="flowQqContent" style="display: none;">
        <p>QQ：<b id="flow-qq">1852634132</b>
           <button class="copy-btn" onclick="copyText('flow-qq')">复制</button>
        </p>
      </div>
    </div>
  </div>
      </div>
    </div>
  </div>

  <script>
    const openFlow = document.getElementById('openFlow');
    const flowMask = document.getElementById('flowMask');
    const closeFlow = document.getElementById('closeFlow');
    openFlow?.addEventListener('click', (e)=>{ e.preventDefault(); flowMask?.classList.add('show'); flowMask?.setAttribute('aria-hidden','false'); });
    closeFlow?.addEventListener('click', ()=>{ flowMask?.classList.remove('show'); flowMask?.setAttribute('aria-hidden','true'); });
    flowMask?.addEventListener('click', (e)=>{ if(e.target===flowMask){ flowMask.classList.remove('show'); flowMask.setAttribute('aria-hidden','true'); }});
    
    // 视频教程浮窗控制
    const videoDrawer = document.getElementById('videoDrawer');
    const videoClose = document.getElementById('videoClose');
    const videoMask = document.getElementById('videoMask');
    
    // 标记视频是否从购买流程弹窗打开
    let videoOpenedFromFlow = false;
    
    function toggleVideoDrawer(show, fromFlow = false){
      const videoElement = document.querySelector('.video-body video');
      
      if(show){
        videoDrawer.classList.add('open');
        videoDrawer.setAttribute('aria-hidden','false');
        videoMask.classList.add('show');
        document.body.style.overflow = 'hidden'; // 防止背景滚动
        videoOpenedFromFlow = fromFlow; // 记录是否从流程弹窗打开
      } else {
        videoDrawer.classList.remove('open');
        videoDrawer.setAttribute('aria-hidden','true');
        videoMask.classList.remove('show');
        document.body.style.overflow = '';
        
        // 强制停止视频播放 - 更彻底的处理方式
        if(videoElement) {
          videoElement.pause();
          videoElement.currentTime = 0; // 重置视频到开始位置
          
          // 移动端额外处理
          // 1. 移除视频源并重新添加
          const videoSrc = videoElement.querySelector('source')?.src;
          if(videoSrc) {
            const parent = videoElement.parentNode;
            const oldVideo = videoElement;
            
            // 创建新的视频元素替换旧的
            const newVideo = document.createElement('video');
            newVideo.controls = true;
            
            const source = document.createElement('source');
            source.src = videoSrc;
            source.type = 'video/mp4';
            
            newVideo.appendChild(source);
            newVideo.appendChild(document.createTextNode('您的浏览器不支持视频播放。'));
            
            // 替换视频元素
            if(parent) {
              parent.replaceChild(newVideo, oldVideo);
            }
          }
        }
        
        // 如果是从购买流程打开的，关闭视频时同时关闭购买流程弹窗
        if(videoOpenedFromFlow) {
          flowMask?.classList.remove('show');
          flowMask?.setAttribute('aria-hidden','true');
          videoOpenedFromFlow = false;
        }
      }
    }
    // 添加点击和触摸事件监听
    videoClose?.addEventListener('click', ()=> toggleVideoDrawer(false));
    videoMask?.addEventListener('click', ()=> toggleVideoDrawer(false));
    
    // 移动端触摸事件支持
    videoClose?.addEventListener('touchend', (e)=> {
      e.preventDefault();
      toggleVideoDrawer(false);
    });
    videoMask?.addEventListener('touchend', (e)=> {
      if(e.target === videoMask) {
        e.preventDefault();
        toggleVideoDrawer(false);
      }
    });
    
    
    // 充值流程弹窗中的QQ折叠展开功能
    const flowQqToggle = document.getElementById('flowQqToggle');
    const flowQqContent = document.getElementById('flowQqContent');
    flowQqToggle?.addEventListener('click', ()=> {
      const isHidden = flowQqContent.style.display === 'none';
      flowQqContent.style.display = isHidden ? 'block' : 'none';
      flowQqToggle.textContent = isHidden ? '收起QQ联系方式' : '微信联系不上时，请联系QQ';
    });
  </script>

</body>
</html>